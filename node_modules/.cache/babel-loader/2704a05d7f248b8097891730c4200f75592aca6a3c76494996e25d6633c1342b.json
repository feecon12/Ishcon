{"ast":null,"code":"import{useState,useEffect}from'react';const useThemeSwitcher=()=>{const preferDarkQuery=\"(prefer-color-scheme:dark)\";const[mode,setMode]=useState(\"\");useEffect(()=>{const mediaQuery=window.matchMedia(preferDarkQuery);const userPref=window.localStorage.getItem(\"theme\");const handleChange=()=>{if(userPref){let check=userPref==='dark'?'dark':'light';setMode(check);if(check==='dark'){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}}else{let check=mediaQuery.matches?'dark':'light';setMode(check);if(check==='dark'){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}}};handleChange();mediaQuery.addEventListener(\"change\",handleChange);return()=>mediaQuery.removeEventListener('change',handleChange);},[]);useEffect(()=>{if(mode==='dark'){window.localStorage.setItem('theme','dark');document.documentElement.classList.add('dark');}if(mode==='light'){window.localStorage.setItem('theme','light');document.documentElement.classList.remove('dark');}},[mode]);return[mode,setMode];};export default useThemeSwitcher;","map":{"version":3,"names":["useState","useEffect","useThemeSwitcher","preferDarkQuery","mode","setMode","mediaQuery","window","matchMedia","userPref","localStorage","getItem","handleChange","check","document","documentElement","classList","add","remove","matches","addEventListener","removeEventListener","setItem"],"sources":["C:/Users/feeco/Desktop/All Apps/vanilla-react-js-apps/ishcon-react/frontend/src/components/hooks/useThemeSwitcher.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\n\r\nconst useThemeSwitcher = () => {\r\n\r\n    const preferDarkQuery = \"(prefer-color-scheme:dark)\";\r\n    const [mode, setMode] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n\r\n        const mediaQuery = window.matchMedia(preferDarkQuery);\r\n        const userPref = window.localStorage.getItem(\"theme\");\r\n\r\n        const handleChange = () => {\r\n            if (userPref) {\r\n                let check = userPref === 'dark' ? 'dark' : 'light';\r\n                setMode(check);\r\n                if (check === 'dark') {\r\n                    document.documentElement.classList.add('dark');\r\n                } else {\r\n                    document.documentElement.classList.remove('dark');\r\n                }\r\n            } else {\r\n                let check = mediaQuery.matches ? 'dark' : 'light';\r\n                setMode(check);\r\n\r\n                if (check === 'dark') {\r\n                    document.documentElement.classList.add('dark');\r\n                } else {\r\n                    document.documentElement.classList.remove('dark');\r\n                }\r\n            }\r\n        }\r\n\r\n        handleChange();\r\n\r\n        mediaQuery.addEventListener(\"change\", handleChange);\r\n\r\n        return () => mediaQuery.removeEventListener('change', handleChange);\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        if (mode === 'dark') {\r\n            window.localStorage.setItem('theme', 'dark');\r\n            document.documentElement.classList.add('dark');\r\n        } if (mode === 'light') {\r\n            window.localStorage.setItem('theme', 'light');\r\n            document.documentElement.classList.remove('dark');\r\n        }\r\n    }, [mode])\r\n\r\n    return [mode, setMode]\r\n}\r\n\r\nexport default useThemeSwitcher"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAE3B,KAAM,CAAAC,eAAe,CAAG,4BAA4B,CACpD,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGL,QAAQ,CAAC,EAAE,CAAC,CAEpCC,SAAS,CAAC,IAAM,CAEZ,KAAM,CAAAK,UAAU,CAAGC,MAAM,CAACC,UAAU,CAACL,eAAe,CAAC,CACrD,KAAM,CAAAM,QAAQ,CAAGF,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAErD,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvB,GAAIH,QAAQ,CAAE,CACV,GAAI,CAAAI,KAAK,CAAGJ,QAAQ,GAAK,MAAM,CAAG,MAAM,CAAG,OAAO,CAClDJ,OAAO,CAACQ,KAAK,CAAC,CACd,GAAIA,KAAK,GAAK,MAAM,CAAE,CAClBC,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC,CAClD,CAAC,IAAM,CACHH,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC,CACrD,CACJ,CAAC,IAAM,CACH,GAAI,CAAAL,KAAK,CAAGP,UAAU,CAACa,OAAO,CAAG,MAAM,CAAG,OAAO,CACjDd,OAAO,CAACQ,KAAK,CAAC,CAEd,GAAIA,KAAK,GAAK,MAAM,CAAE,CAClBC,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC,CAClD,CAAC,IAAM,CACHH,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC,CACrD,CACJ,CACJ,CAAC,CAEDN,YAAY,CAAC,CAAC,CAEdN,UAAU,CAACc,gBAAgB,CAAC,QAAQ,CAAER,YAAY,CAAC,CAEnD,MAAO,IAAMN,UAAU,CAACe,mBAAmB,CAAC,QAAQ,CAAET,YAAY,CAAC,CACvE,CAAC,CAAE,EAAE,CAAC,CAGNX,SAAS,CAAC,IAAM,CACZ,GAAIG,IAAI,GAAK,MAAM,CAAE,CACjBG,MAAM,CAACG,YAAY,CAACY,OAAO,CAAC,OAAO,CAAE,MAAM,CAAC,CAC5CR,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC,CAClD,CAAE,GAAIb,IAAI,GAAK,OAAO,CAAE,CACpBG,MAAM,CAACG,YAAY,CAACY,OAAO,CAAC,OAAO,CAAE,OAAO,CAAC,CAC7CR,QAAQ,CAACC,eAAe,CAACC,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC,CACrD,CACJ,CAAC,CAAE,CAACd,IAAI,CAAC,CAAC,CAEV,MAAO,CAACA,IAAI,CAAEC,OAAO,CAAC,CAC1B,CAAC,CAED,cAAe,CAAAH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}